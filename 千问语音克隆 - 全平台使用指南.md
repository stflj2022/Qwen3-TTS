# 千问语音克隆 - 全平台使用指南

> 适用于 Windows / Linux / macOS 的详细使用说明

---

## 目录

1. [快速开始](#快速开始)
2. [WebUI 界面使用](#webui-界面使用)
3. [命令行使用](#命令行使用)
4. [进阶功能](#进阶功能)
5. [API 调用](#api-调用)
6. [常见使用场景](#常见使用场景)
7. [跨平台迁移](#跨平台迁移)

---

## 快速开始

### 启动程序

**Windows**: 双击 `启动WebUI.bat`

**Linux/macOS**: 运行 `./启动WebUI.sh`

### 访问界面

启动后，浏览器会自动打开 http://localhost:7860

如未自动打开，手动访问该地址。

---

## WebUI 界面使用

### 界面总览

```
┌─────────────────────────────────────────────────────────┐
│           🎙️ 千问语音克隆 - Qwen3-TTS                   │
│  支持中英日韩等10种语言 | 9种预置音色 | 声音设计 | 声音克隆 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐           │
│  │  🎭 预置音色 │  🎨 声音设计 │  🎤 声音克隆 │  📝 批量生成 │           │
│  └─────────────┴─────────────┴─────────────┴─────────────┘           │
│                                                         │
│                    [主要内容区域]                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## Tab 1: 预置音色

### 功能说明

使用内置的 9 种高质量音色生成语音。**预置音色输出标准普通话，无方言口音。**

### 操作步骤

1. **输入文本**
   - 在「输入文本」框中输入要转换的文字
   - 支持中文、英文、日文、韩文等 10 种语言
   - 建议单次输入 200 字以内

2. **选择音色**
   - 从下拉菜单选择音色
   - 参考右侧音色说明选择合适的音色

3. **选择语言**
   - `Auto`: 自动检测语言（推荐）
   - 或手动指定语言

4. **添加风格指令（可选）**
   - 输入情感描述，如「愉快地」「悲伤地」
   - 可留空使用默认风格

5. **点击「生成语音」**
   - 等待 10-30 秒（取决于文本长度）
   - 生成完成后可在线播放或下载

### 预置音色对照表

| 音色代码 | 音色名称 | 适用场景 |
|---------|---------|---------|
| `vivian` | 女声-年轻-可爱-亲切 | 有声书、客服、儿童内容 |
| `serena` | 女声-年轻-中性 | 新闻播报、教学视频 |
| `ono_anna` | 女声-成熟-温柔 | 情感类内容、纪录片 |
| `aiden` | 男声-年轻-自然 | Vlog、播客、广告 |
| `dylan` | 男声-成熟-自然 | 企业宣传、产品介绍 |
| `ryan` | 男声-成熟-旁白 | 纪录片、有声书旁白 |
| `uncle_fu` | 男声-成熟-深沉 | 电影预告、史诗内容 |
| `eric` | 男童-可爱 | 儿童故事、动画片 |
| `sohee` | 女童-可爱 | 儿童故事、动画片 |

### 示例

| 输入文本 | 音色 | 语言 | 效果 |
|---------|------|------|------|
| 你好，欢迎使用千问语音合成。 | vivian | Chinese | 亲切的标准普通话女声问候 |
| Hello, welcome to our service. | aiden | English | 自然的男声欢迎 |
| こんにちは、ようこそ。 | serena | Japanese | 中性女声日文 |
| 안녕하세요, 만나서 반갑습니다. | dylan | Korean | 成熟男声韩文 |

---

## Tab 2: 声音设计 (VoiceDesign)

### 功能说明

**用文字描述生成全新的声音！** 无需参考音频，只需用文字描述你想要的声音特征，AI 就会创建符合描述的声音。

**重要**：声音设计保持用户描述的意图，可以设计带口音/方言的音色，不会被强制转换为普通话。

### 与声音克隆的区别

| 功能 | 声音设计 (VoiceDesign) | 声音克隆 (Base) |
|------|----------------------|----------------|
| **输入** | 文字描述 | 参考音频 |
| **原理** | AI 根据描述创建声音 | AI 复制现有声音 |
| **灵活性** | 极高，可以创造任意声音 | 限于参考音色 |
| **适用** | 创作全新角色、理想声音 | 模仿特定人物声音 |
| **口音处理** | 完全按用户描述 | 保持原说话者口音 |

### 操作步骤

1. **输入声音描述**
   - 用英文描述你想要的声音特征
   - 包括：性别、年龄、性格、音色、用途等
   - 详见下方「描述词模板」

2. **输入要生成的文本**
   - 输入要用这个声音说的话
   - 支持中英日韩等 10 种语言

3. **选择语言**
   - `Auto`: 自动检测（推荐）
   - 或手动指定

4. **点击「设计声音并生成」**
   - 首次使用需要 30-60 秒
   - 生成后可播放或下载

### 声音描述词模板

#### 按性别年龄

| 描述 | 效果 |
|------|------|
| `Male, 25 years old, confident, deep voice` | 自信年轻男声，深沉 |
| `Female, 20 years old, cheerful, friendly` | 活泼开朗女声 |
| `Male, 50 years old, calm, authoritative` | 成熟稳重男声，权威感 |
| `Female, 35 years old, gentle, soft-spoken` | 温柔女声，轻声细语 |
| `Male, child, 8 years old, cute, high-pitched` | 可爱男童音 |
| `Female, child, 10 years old, energetic` | 活泼女童音 |

#### 按用途场景

| 场景 | 描述词 |
|------|--------|
| **新闻主播** | `Male, 30-40 years old, professional, clear articulation, authoritative, news anchor style` |
| **纪录片解说** | `Male, 50 years old, calm, deep voice, narrative, documentary style` |
| **有声书旁白** | `Female, 40 years old, warm, engaging, storytelling, clear pronunciation` |
| **游戏角色-英雄** | `Male, 30 years old, powerful, confident, brave, game character` |
| **游戏角色-精灵** | `Female, young, ethereal, light, magical, fantasy creature` |
| **客服语音** | `Female, 25 years old, polite, friendly, professional, customer service` |
| **广告配音** | `Male, 30 years old, energetic, enthusiastic, persuasive, commercial` |
| **AI助手** | `Gender-neutral, 30 years old, calm, helpful, clear, AI assistant` |

#### 带口音的声音设计

| 描述 | 效果 |
|------|------|
| `Male, Sichuan accent, friendly voice` | 四川话男声 |
| `Female, Cantonese accent, cheerful` | 粤语女声 |
| `Male, Beijing accent, enthusiastic` | 京腔男声 |
| `Female, Northeastern accent, lively` | 东北女声 |

### 描述词编写技巧

```
描述词格式建议：
[性别], [年龄], [性格/情感], [音色特征], [用途风格]

示例组合：
- Female, 20s, cheerful, bright voice, streaming style
- Male, 50s, wise, calm, deep voice, mentor character
- Female, 30s, elegant, smooth voice, luxury brand
```

### 使用场景

| 场景 | 示例描述词 | 生成文本 |
|------|-----------|---------|
| **小说主角** | `Male, 25 years old, brave, determined, young hero` | 主角台词 |
| **虚构角色** | `Female, ancient goddess, ethereal, powerful, divine` | 神谕内容 |
| **企业形象** | `Male, 40 years old, professional, trustworthy, CEO` | 企业介绍 |
| **教程配音** | `Female, 30 years old, clear, patient, instructional` | 教学内容 |

### 声音设计进阶技巧

1. **迭代优化** - 先用简单描述生成，再根据效果调整描述词
2. **组合特征** - 可以组合多个特征获得更精确的效果
3. **语言混合** - 描述词用英文效果最好，但生成文本支持多语言
4. **保存描述** - 找到理想的描述词后保存，方便重复使用

---

## Tab 3: 声音克隆

### 功能说明

用一段 3-10 秒的参考音频，克隆任意人的声音。

**重要**：声音克隆会保持原说话者的口音和方言特色，不会强制转换为标准普通话。

### 操作步骤

1. **准备参考音频**
   - 时长：3-10 秒最佳
   - 格式：WAV、MP3、M4A 等常见格式
   - 内容：清晰的语音，无背景音乐
   - 采样率：建议 16kHz 或以上

2. **输入参考文本**
   - 准确输入参考音频中说的内容
   - 包括标点符号
   - 文本必须与音频内容完全匹配

3. **输入目标文本**
   - 输入要用克隆声音说的话
   - 可以是任何语言（模型会自动转换）
   - 建议单次 200 字以内

4. **点击「克隆语音」**
   - 首次克隆需要 30-60 秒
   - 后续克隆会更快

### 克隆效果优化建议

| 因素 | 建议 |
|------|------|
| **音频质量** | 使用清晰、无噪音的录音 |
| **音频时长** | 5-10 秒最佳，至少 3 秒 |
| **说话内容** | 选择包含元音丰富的句子 |
| **环境噪音** | 在安静环境录制 |
| **发音清晰** | 发音标准，不要含混不清 |

### 克隆场景示例

| 场景 | 参考音频建议 | 目标文本示例 |
|------|-------------|-------------|
| **自我配音** | 录制自己说「大家好，我是XXX」 | 生成任何你想要说的话 |
| **名人模仿** | 找一段清晰的演讲/访谈片段 | 生成该名人的其他内容 |
| **游戏角色** | 游戏角色的语音片段 | 生成该角色的其他台词 |
| **动画配音** | 原角色的台词音频 | 生成该角色的其他台词 |

---

## Tab 3.5: 我的克隆音色管理

### 功能说明

保存你克隆的音色，方便下次直接使用，无需重新上传参考音频。

### 保存克隆音色

1. 在「声音克隆」区域，上传参考音频并输入参考文本
2. 在「保存音色名称」输入框中填写名称（如：我的声音、紫雨、小明）
3. 点击「克隆语音」
4. 克隆成功后，音色会自动保存，可在「我的克隆音色」区域查看

### 使用已保存的音色

1. 在「我的克隆音色」区域，从下拉菜单选择保存的音色
2. 输入要转换的新文本
3. 点击「使用保存的音色生成」

### 删除克隆音色

1. 在「已保存的音色列表」中找到要删除的音色ID
2. 将ID复制到「要删除的音色ID」输入框
3. 点击「删除克隆音色」按钮

### 批量生成使用克隆音色

1. 切换到「批量生成」标签页
2. 点击「🔄 刷新音色列表」（如果刚保存了新音色）
3. 在「选择音色」下拉菜单中选择带 🎤 图标的克隆音色
4. 输入多行文本，点击「批量生成」

**注意**：批量生成使用克隆音色时，会保持原音色的口音特色。

### 存储位置

保存的克隆音色存储在项目目录的 `cloned_voices/` 文件夹中：

```
cloned_voices/
├── 紫雨_20260125_092019/
│   ├── reference.wav     # 参考音频
│   └── meta.json         # 元数据
└── 我的声音_20260125_093000/
    ├── reference.wav
    └── meta.json
```

### 备份与迁移

**备份克隆音色**：
```bash
# 复制整个克隆音色文件夹
cp -r cloned_voices cloned_voices_backup
```

**迁移到其他电脑**：
1. 复制 `cloned_voices/` 文件夹到新电脑的项目目录下
2. 确保文件夹结构一致

---

## Tab 4: 批量生成

### 功能说明

一次性处理多段文本，自动逐个生成并合并。支持预置音色和保存的克隆音色。

### 音色选择说明

批量生成时，选择什么音色就用什么音色：

| 音色类型 | 图标 | 口音处理 |
|---------|------|---------|
| 预置音色 | 🎭 | 标准普通话，无方言口音 |
| 克隆音色 | 🎤 | 保持原说话者口音特色 |

### 操作步骤

1. **导入文本**
   - 点击「📥 导入文件」上传 .txt 文件
   - 或直接在文本框输入/粘贴内容
   - 每行一句话，空行自动忽略
   - 建议单次不超过 100 行

2. **选择音色和语言**
   - 🎭 带图标的是预置音色（vivian, serena 等）
   - 🎤 带图标的是保存的克隆音色
   - 如刚保存了新克隆音色，点击「🔄 刷新音色列表」
   - 可选择 `Auto` 自动检测语言

3. **选择输出格式**
   - **WAV**: 无损质量，文件较大
   - **Opus**: 压缩格式，文件小，音质好

4. **输入作品名称（可选）**
   - 用于文件命名前缀
   - 如不填，使用音色名称

5. **点击「🎵 批量生成」**
   - 逐个生成每段音频
   - 自动合并为一个完整音频文件
   - 进度状态会显示生成数量

6. **查看结果**
   - 右侧「生成的音频」框显示合并后的完整音频（可直接播放）
   - 「状态」框显示生成结果摘要
   - 「生成进度」框显示实时进度
   - 「生成的文件列表」框显示所有单个文件路径

### 右侧功能框说明（从上到下）

| 功能框 | 说明 |
|--------|------|
| **生成的音频** | 显示合并后的完整音频，可直接播放或下载 |
| **状态** | 显示生成结果（成功数量、格式等） |
| **生成进度** | 显示实时生成进度（正在生成：X/Y） |
| **生成的文件列表** | 显示所有单个音频文件的路径 |

### 使用场景

| 场景 | 示例 |
|------|------|
| **有声书** | 按段落录入，批量生成 |
| **多语言配音** | 中英日韩混合内容 |
| **客服话术** | 批量生成常见回复 |
| **播客内容** | 章节内容批量生成 |

---

## 音色处理规则总结

| 功能 | 口音处理 | 说明 |
|------|---------|------|
| **预置音色** | 标准普通话 | 自动优化为标准普通话，无方言口音 |
| **声音克隆** | 保持原口音 | 完整保留原说话者的口音和方言特色 |
| **声音设计** | 按用户描述 | 可设计任意口音，包括方言，不被强制转换 |
| **批量生成-预置** | 标准普通话 | 遵循预置音色规则 |
| **批量生成-克隆** | 保持原口音 | 遵循克隆音色规则 |

---

## 命令行使用

### 激活虚拟环境

```bash
# Windows
venv\Scripts\activate

# Linux/macOS
source venv/bin/activate
```

### 基本命令

#### 预置音色生成

```bash
python run_tts.py custom \
  --text "你好，世界！" \
  --speaker vivian \
  --language Chinese \
  --output hello.wav
```

#### 声音克隆

```bash
python run_tts.py clone \
  --text "这是克隆后的声音" \
  --ref-audio reference.wav \
  --ref-text "这是参考音频的内容" \
  --output cloned.wav
```

### 参数说明

| 参数 | 说明 | 必填 | 默认值 |
|------|------|------|--------|
| `--text` | 要转换的文本 | 是 | - |
| `--speaker` | 预置音色名称 | 否 | vivian |
| `--language` | 语言 | 否 | Auto |
| `--ref-audio` | 参考音频路径（克隆模式） | 是* | - |
| `--ref-text` | 参考文本（克隆模式） | 是* | - |
| `--output` | 输出文件路径 | 否 | output.wav |
| `--instruct` | 风格指令 | 否 | 无 |

*仅克隆模式需要

---

## 进阶功能

### 1. 风格控制

通过 `instruct` 参数控制语音情感：

```python
# Python 代码
model.generate_custom_voice(
    text="今天天气真好",
    speaker="vivian",
    instruct="愉快地、兴奋地"
)
```

**风格指令示例：**

| 指令 | 效果 |
|------|------|
| 愉快地、兴奋地 | 欢快、有活力 |
| 悲伤地、低沉地 | 沉重、缓慢 |
| 严肃地、正式地 | 正式、庄重 |
| 温柔地、轻声地 | 温柔、轻柔 |
| 急促地、紧张地 | 快速、紧张 |

### 2. 多语言混合

在单段文本中混合多种语言：

```
Hello everyone, 大家好，ようこそ, 환영합니다。
```

模型会自动识别并正确处理每种语言。

### 3. 批量处理脚本

创建一个文本文件 `texts.txt`：

```
第一句话
第二句话
第三句话
```

运行批量处理：

```bash
while read -r line; do
    python run_tts.py custom --text "$line" --speaker vivian --output "output_${#}.wav"
done < texts.txt
```

### 4. 调整采样率和格式

修改 `webui.py` 或 `run_tts.py`：

```python
# 保存时指定格式
sf.write("output.wav", wavs[0], sr, subtype='PCM_16')

# 或使用 soundfile 转换
import soundfile as sf
data, sr = sf.read("output.wav")
sf.write("output.flac", data, sr, format='FLAC')
```

---

## API 调用

### Python API

```python
import torch
import soundfile as sf
from qwen_tts import Qwen3TTSModel

# 加载模型
model = Qwen3TTSModel.from_pretrained(
    "models",  # 模型路径
    device_map="cpu",
    dtype=torch.float32,
)

# 预置音色生成
wavs, sr = model.generate_custom_voice(
    text="你好，这是API调用示例",
    speaker="vivian",
    language="Chinese",
)

# 保存音频
sf.write("output.wav", wavs[0], sr)
```

### 声音克隆 API

```python
# 创建克隆提示
voice_clone_prompt = model.create_voice_clone_prompt(
    ref_audio="reference.wav",
    ref_text="参考音频的文本内容",
)

# 使用克隆提示生成
wavs, sr = model.generate_custom_voice(
    text="这是用克隆声音生成的新内容",
    voice_clone_prompt=voice_clone_prompt,
)

sf.write("cloned.wav", wavs[0], sr)
```

### 声音设计 API (VoiceDesign)

```python
# 加载 VoiceDesign 模型
voice_design_model = Qwen3TTSModel.from_pretrained(
    "models-voicedesign",
    device_map="cpu",
    dtype=torch.float32,
)

# 用文字描述生成声音
wavs, sr = voice_design_model.generate_voice_design(
    text="这是用设计的生成的新声音",
    language="Chinese",
    instruct="Male, 30 years old, confident, deep voice, news anchor",
)

sf.write("designed.wav", wavs[0], sr)
```

### Flask Web 服务示例

```python
from flask import Flask, request, send_file
from qwen_tts import Qwen3TTSModel
import soundfile as sf
import tempfile

app = Flask(__name__)
model = Qwen3TTSModel.from_pretrained("models", device_map="cpu", dtype=torch.float32)

@app.route('/tts', methods=['POST'])
def text_to_speech():
    data = request.json
    text = data.get('text')
    speaker = data.get('speaker', 'vivian')

    wavs, sr = model.generate_custom_voice(text=text, speaker=speaker)

    with tempfile.NamedTemporaryFile(suffix='.wav', delete=False) as f:
        sf.write(f.name, wavs[0], sr)
        return send_file(f.name, mimetype='audio/wav')

if __name__ == '__main__':
    app.run(port=5000)
```

---

## 常见使用场景

### 场景 1: 有声书制作

```
1. 准备文本文件（按章节分段）
2. 选择预置音色（如 ono_anna 温柔女声）
3. 使用批量生成功能
4. 逐章生成并合并
5. 添加背景音乐（使用其他软件）
```

### 场景 2: 视频配音

```
1. 导出视频字幕文本
2. 按时间轴分段
3. 使用克隆功能模仿原配音
4. 批量生成音频
5. 在视频编辑软件中替换音频
```

### 场景 3: 客服话术

```
1. 整理常见客服回复话术
2. 选择预置专业音色（如 serena）
3. 批量生成所有话术
4. 保存为 Opus 格式
5. 导入客服系统
```

### 场景 4: 虚拟角色创作

```
1. 设计角色的声音特征
   - 用描述词定义声音（性别、年龄、性格、口音）
   - 例如: Male, 25 years old, Sichuan accent, brave, hero
2. 输入角色台词
3. 试听效果并调整描述词
4. 保存理想的描述词供后续使用
```

### 场景 5: 多语言内容

```
1. 准备多语言文本
2. 选择合适的音色
3. 设置语言为 Auto
4. 混合生成多语言音频
```

### 场景 6: 游戏角色配音

```
1. 提取游戏角色原声片段（3-5秒）
2. 使用克隆功能创建角色音色
3. 输入角色台词生成配音
4. 批量处理所有台词
```

---

## 输出文件管理

### 输出位置

所有生成的音频文件保存在 `outputs` 文件夹：

```
千问语音克隆/
└── outputs/
    ├── vivian_12.wav                  # 预置音色生成
    ├── clone_15.wav                   # 声音克隆
    ├── voice_design_20.wav            # 声音设计
    ├── 三体_001.wav                   # 批量生成（单段）
    ├── 三体_002.wav
    ├── 三体_combined.opus             # 批量生成（合并）
    └── ...
```

### 文件格式

- **格式**: WAV (RIFF WAVE) 或 Opus
- **编码**: PCM 16-bit (WAV) / Opus 编码
- **采样率**: 24000 Hz
- **声道**: 单声道 (Mono)

### 格式转换

转换为 MP3：

```bash
# 使用 ffmpeg
ffmpeg -i output.wav -codec:a libmp3lame -b:a 128k output.mp3
```

---

## 跨平台迁移

将项目从一台电脑迁移到另一台电脑（Windows / Linux / macOS 之间互传）。

### 迁移原理

| 内容 | 是否可拷贝 | 说明 |
|------|-----------|------|
| 三个模型文件夹 | ✅ 可直接拷贝 | 约12GB，无需重新下载 |
| cloned_voices/ | ✅ 可直接拷贝 | 保存的克隆音色 |
| 所有 .py 文件 | ✅ 可直接拷贝 | 程序代码 |
| venv/ 虚拟环境 | ❌ 需重建 | 含系统绝对路径，不兼容 |

### Windows 迁移步骤

```cmd
# 1. 拷贝整个文件夹到目标电脑

# 2. 删除虚拟环境（避免路径问题）
rmdir /s venv

# 3. 安装 Python 3.10+
# 从 https://www.python.org/downloads/ 下载安装
# 务必勾选 "Add Python to PATH"

# 4. 安装 ffmpeg（可选，用于 Opus 格式）
# 方法一：使用 Chocolatey
choco install ffmpeg
# 方法二：从 https://ffmpeg.org/download.html 下载

# 5. 双击运行 启动WebUI.bat
# 会自动创建虚拟环境并安装依赖（首次5-15分钟）
```

### macOS 迁移步骤

```bash
# 1. 拷贝整个文件夹到目标电脑

# 2. 删除虚拟环境
rm -rf venv/
rm -rf __pycache__/

# 3. 安装 Homebrew（如果没有）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 4. 安装 Python 和 ffmpeg
brew install python@3.11 ffmpeg

# 5. 添加执行权限并运行
chmod +x 启动WebUI.sh
./启动WebUI.sh
```

### Linux 迁移步骤

```bash
# 1. 拷贝整个文件夹到目标电脑

# 2. 删除虚拟环境
rm -rf venv/
rm -rf __pycache__/

# 3. 安装系统依赖
sudo apt update
sudo apt install python3 python3-venv ffmpeg -y

# 4. 添加执行权限并运行
chmod +x 启动WebUI.sh
./启动WebUI.sh
```

### 跨平台迁移对照表

| 系统 | 删除 venv 命令 | 安装 Python | 安装 ffmpeg | 启动方式 |
|------|---------------|-------------|-------------|----------|
| **Windows** | `rmdir /s venv` | python.org 下载 | chocolatey 或手动 | 双击 `.bat` |
| **macOS** | `rm -rf venv` | `brew install python` | `brew install ffmpeg` | `./启动WebUI.sh` |
| **Linux** | `rm -rf venv` | `apt install python3` | `apt install ffmpeg` | `./启动WebUI.sh` |

### 精简迁移（省空间）

如果目标电脑只需要运行，可以只拷贝核心文件：

```
千问语音克隆/
├── models/                # 必需 (4.3GB)
├── models-base/           # 必需 (4.3GB)
├── models-voicedesign/    # 必需 (3.6GB)
├── webui.py               # 必需
├── voice_optimizer.py     # 必需
├── memory_manager.py      # 必需
├── requirements.txt       # 必需
├── 启动WebUI.sh           # Linux/macOS
├── 启动WebUI.bat          # Windows
├── run_tts.py             # 可选（命令行使用）
├── cloned_voices/         # 可选（保存的音色）
└── outputs/               # 可选（已生成的音频）
```

---

## 性能优化

### CPU 运行优化

1. **关闭其他程序** - 释放 CPU 资源
2. **减少文本长度** - 分段生成再合并
3. **使用较低采样率** - 修改代码中的 sr 参数

### GPU 加速

如有 NVIDIA 显卡：

1. 安装 CUDA 版 PyTorch
2. 修改 `device_map="cpu"` 为 `device_map="cuda:0"`
3. 速度可提升 5-10 倍

---

## 内存管理

系统内置智能内存管理系统：

| 功能 | 说明 |
|------|------|
| **实时监控** | 每30秒检查一次内存使用情况 |
| **自动清理** | 70%警告，90%危险阈值 |
| **分批处理** | 批量生成每50个音频清理一次 |
| **紧急工具** | emergency_memory_fix.py 处理内存问题 |

---

## 故障排除

| 问题 | 可能原因 | 解决方法 |
|------|---------|---------|
| 生成失败 | 文本过长 | 分段生成 |
| 音质不佳 | 网络音频压缩 | 使用高质量参考音频 |
| 克隆效果差 | 参考音频不清晰 | 重新录制清晰音频 |
| 端口冲突 | 7860 被占用 | 修改端口号或停止占用进程 |
| 内存不足 | 文本过多 | 减少批量数量 |
| 批量音频不显示 | 旧版本bug | 更新到最新版本 |

---

**文档版本**: 1.4 | **更新日期**: 2026-01-26

---

## 更新日志

### v1.4 (2026-01-26)
- 添加跨平台迁移章节（Windows/macOS/Linux）
- 精简迁移文件列表

### v1.3 (2026-01-26)
- 修复批量生成页面音频显示问题
- 更新音色处理规则说明
- 添加内存管理说明

### v1.2 (2025-01-25)
- 初始版本
